(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"1HCV":function(e,t,a){e.exports={parameter:"parameter___2A22Z",operate:"operate___tZ3f0"}},"he1/":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("g9YV"),a("wCAj")),c=(a("P2fV"),a("NJEC")),u=(a("+L6B"),a("2/Rp")),s=(a("14J3"),a("BMrR")),i=(a("/zsF"),a("PArb")),o=(a("jCWc"),a("kPKH")),l=(a("+BJd"),a("mr32")),p=(a("miYZ"),a("tsqr")),d=a("WmNS"),m=a.n(d),f=a("9og8"),b=a("tJVT"),h=(a("2qtc"),a("kLXV")),w=a("q1tI"),j=a.n(w),O=a("Hx5s"),k=a("Lyp1"),y=a("X72a"),x=a("G3dp"),v=a("/MfK"),E=a("eFNv"),g=a("0Owb"),C=(a("5NDa"),a("5rEg")),N=(a("y8nQ"),a("Vl3Y")),S={labelCol:{span:4},wrapperCol:{span:20}},I={roleName:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0!"}],roleDesc:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0!"}]},D=function(e){var t=e.modalVisible,a=e.onCancel,n=e.alterAdd,r=e.amendData,c=e.addRoleLists,u=N["a"].useForm(),s=Object(b["a"])(u,1),i=s[0],o=function(){i.validateFields().then((function(e){c(e),console.log(e)}))};return Object(w["useEffect"])((function(){console.log("aa"),n?(console.log(1),i.setFieldsValue({roleName:r.roleName,roleDesc:r.roleDesc})):i.resetFields()})),j.a.createElement(h["a"],{destroyOnClose:!0,title:n?"\u4fee\u6539\u89d2\u8272":"\u6dfb\u52a0\u89d2\u8272",visible:t,onCancel:function(){return a()},okText:n?"\u4fee\u6539":"\u6dfb\u52a0",onOk:o},j.a.createElement(N["a"],Object(g["a"])({form:i},S,{name:"basic",initialValues:{remember:!0}}),j.a.createElement(N["a"].Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:I.roleName},j.a.createElement(C["a"],null)),j.a.createElement(N["a"].Item,{label:"\u89d2\u8272\u63cf\u8ff0",name:"roleDesc",rules:I.roleDesc},j.a.createElement(C["a"],null))))},V=D,R=(a("ozfa"),a("MJZm")),z=function(e){var t=e.modalVisible,a=e.onCancel,n=e.AllocationJurisdiction,r=e.jurisdictionLists,c=e.setRole,u=Object(w["useState"])([]),s=Object(b["a"])(u,2),i=s[0],o=s[1],l=Object(w["useState"])(!0),p=Object(b["a"])(l,2),d=p[0],m=p[1],f=function(e){m(!1),o(e)},O=function(){c(i.join(","))};return Object(w["useEffect"])((function(){d&&o(r)})),j.a.createElement(h["a"],{destroyOnClose:!0,title:"\u5206\u914d\u6743\u9650",visible:t,onCancel:function(){return a()},onOk:O},j.a.createElement(R["a"],{checkable:!0,onCheck:f,checkedKeys:i,treeData:n}))},J=z,A=a("io9h"),L=a("RKZ9");function F(){return _.apply(this,arguments)}function _(){return _=Object(f["a"])(m.a.mark((function e(){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles")));case 1:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function q(e){return T.apply(this,arguments)}function T(){return T=Object(f["a"])(m.a.mark((function e(t){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles"),{method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function Z(e){return H.apply(this,arguments)}function H(){return H=Object(f["a"])(m.a.mark((function e(t){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles/").concat(t.id),{method:"put",data:t.param}));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function K(e){return M.apply(this,arguments)}function M(){return M=Object(f["a"])(m.a.mark((function e(t){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles/").concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function P(e){return Y.apply(this,arguments)}function Y(){return Y=Object(f["a"])(m.a.mark((function e(t){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles/").concat(t.recordIds,"/rights/").concat(t.itemId),{method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return W=Object(f["a"])(m.a.mark((function e(){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"rights/tree"),{method:"get"}));case 1:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function X(e){return G.apply(this,arguments)}function G(){return G=Object(f["a"])(m.a.mark((function e(t){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A["a"])("".concat(L["a"],"roles/").concat(t.setRoleId,"/rights"),{method:"post",data:{rids:t.jurisdictionId}}));case 1:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}var Q=a("1HCV"),U=a.n(Q),$=h["a"].confirm,ee=function(){var e=Object(w["useState"])([]),t=Object(b["a"])(e,2),a=t[0],d=t[1],h=Object(w["useState"])(!1),g=Object(b["a"])(h,2),C=g[0],N=g[1],S=Object(w["useState"])(!1),I=Object(b["a"])(S,2),D=I[0],R=I[1],z=Object(w["useState"])({}),A=Object(b["a"])(z,2),L=A[0],_=A[1],T=Object(w["useState"])(!1),H=Object(b["a"])(T,2),M=H[0],Y=H[1],W=Object(w["useState"])([]),G=Object(b["a"])(W,2),Q=G[0],ee=G[1],te=Object(w["useState"])([]),ae=Object(b["a"])(te,2),ne=ae[0],re=ae[1],ce=Object(w["useState"])(),ue=Object(b["a"])(ce,2),se=ue[0],ie=ue[1],oe=[],le=function e(t,a){t.map((function(t,n){a&&(oe.push(t.id),re(oe));var r=t;return r.key=t.id,r.key2=n+1,r.title=t.authName,t.children&&e(t.children,a),r}))},pe=function(){var e=Object(f["a"])(m.a.mark((function e(){var t;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,200===t.meta.status&&(le(t.data,!1),d(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(f["a"])(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.preventDefault(),$({title:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u89d2\u8272\u6b64\u9650\u6743?",icon:j.a.createElement(k["a"],{style:{color:"red"}}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var e=Object(f["a"])(m.a.mark((function e(){var n,r,c;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,P({recordIds:n,itemId:a});case 3:if(r=e.sent,c=r.meta,200===c.status){e.next=7;break}return e.abrupt("return",p["a"].error(c.msg));case 7:return p["a"].success("\u5220\u9664\u8be5\u9650\u6743\u6210\u529f"),pe(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),onCancel:function(){}});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),me=function(){N(!1),Y(!1),re([])},fe=function(e,t){N(!0),R(e),e&&_(t)},be=function(){var e=Object(f["a"])(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K(t.id);case 2:if(a=e.sent,n=a.meta,200===n.status){e.next=6;break}return e.abrupt("return",p["a"].error(n.msg));case 6:return p["a"].success("\u5220\u9664\u6210\u529f"),pe(),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(f["a"])(m.a.mark((function e(t){var a,n,r,c,u;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(D){e.next=10;break}return e.next=3,q(t);case 3:if(a=e.sent,n=a.meta,201===n.status){e.next=7;break}return e.abrupt("return",p["a"].error(n.msg));case 7:p["a"].success("\u89d2\u8272\u521b\u5efa\u6210\u529f"),e.next=18;break;case 10:return r=L.id,e.next=13,Z({id:r,param:t});case 13:if(c=e.sent,u=c.meta,200===u.status){e.next=17;break}return e.abrupt("return",p["a"].error(u.msg));case 17:p["a"].success("\u89d2\u8272\u4fee\u6539\u6210\u529f");case 18:return N(!1),pe(),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(f["a"])(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ie(t.id),Y(!0),le(t.children,!0),e.next=5,B();case 5:if(a=e.sent,n=a.data,r=a.meta,200===r.status){e.next=10;break}return e.abrupt("return",p["a"].error(r.msg));case 10:return le(n,!1),ee(n),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(f["a"])(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X({setRoleId:se,jurisdictionId:t});case 2:if(a=e.sent,n=a.meta,200===n.status){e.next=6;break}return e.abrupt("return",p["a"].error(n.msg));case 6:return p["a"].success("\u6388\u6743\u6210\u529f"),Y(!1),pe(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(w["useEffect"])((function(){pe()}),[]);var Oe=function(e,t){return e.children.map((function(a,n){var r=null;return r=a.children?j.a.createElement(s["a"],{key:a.id,className:U.a.parameter},j.a.createElement(o["a"],{span:5},j.a.createElement(l["a"],{color:"blue",closable:!0,onClose:function(e){return de(t,a.id,e)}},a.authName),j.a.createElement(y["a"],{style:{fontSize:"11px"}})),j.a.createElement(o["a"],{span:19},Oe(a,t)),e.children.length===n+1?"":j.a.createElement(i["a"],null)):j.a.createElement(l["a"],{color:"orange",closable:!0,key:a.id,onClose:function(e){return de(t,a.id,e)}},a.authName),r}))},ke=j.a.createElement(u["a"],{type:"primary",onClick:function(){return fe(!1,null)}},"\u6dfb\u52a0\u89d2\u8272"),ye=[{title:"",dataIndex:"key2",key:"key2",width:50},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName",key:"roleName"},{title:"\u89d2\u8272\u63cf\u8ff0",dataIndex:"roleDesc",key:"roleDesc"},{title:"\u64cd\u4f5c",dataIndex:"",key:"x",width:320,render:function(e,t){return j.a.createElement("div",{className:U.a.operate},j.a.createElement(u["a"],{type:"link",icon:j.a.createElement(x["a"],{style:{fontSize:"13px"}}),size:"small",onClick:function(){return fe(!0,t)}},"\u7f16\u8f91"),j.a.createElement(c["a"],{placement:"topRight",title:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u89d2\u8272\u5417",onConfirm:function(){return be(e)},icon:j.a.createElement(k["a"],{style:{color:"red"}})},j.a.createElement(u["a"],{type:"link",danger:!0,icon:j.a.createElement(v["a"],{style:{fontSize:"13px"}}),size:"small"},"Delete")),j.a.createElement(u["a"],{type:"link",icon:j.a.createElement(E["a"],{style:{fontSize:"13px"}}),size:"small",onClick:function(){return we(t)}},"\u5206\u914d\u6743\u9650"))}}];return j.a.createElement(O["b"],null,j.a.createElement(n["a"],{bordered:!1,title:ke},j.a.createElement(r["a"],{columns:ye,bordered:!0,expandable:{childrenColumnName:" ",expandedRowRender:function(e){return j.a.createElement("div",{style:{margin:0}},Oe(e,e))},rowExpandable:function(e){return e.children.length>0}},dataSource:a,pagination:{hideOnSinglePage:!0}}),j.a.createElement(V,{modalVisible:C,onCancel:me,alterAdd:D,amendData:L,addRoleLists:he}),j.a.createElement(J,{modalVisible:M,onCancel:me,AllocationJurisdiction:Q,jurisdictionLists:ne,setRole:je})))};t["default"]=ee}}]);